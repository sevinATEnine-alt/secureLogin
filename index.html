
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "icon" type = "image/x-icon" href = "data:image/png;base64,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">
    <title>SHREK server terminal</title>

    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" />

    <style>

        body {
            background-color: black;
            color: rgb(0, 255, 0);

            font-family: "Ubuntu Mono";
        }

        * {
            background-color: black;
            color: rgb(0, 255, 0);

            font-family: "Ubuntu Mono";
        }

        input[type=text] {
            padding: 12px 20px;
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button{
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 12px 30px;
            text-decoration: none;
            margin: 4px 2px;
            cursor: pointer;
        }
        canvas {
            color: black;
            background-color: black !important;
        /*prevent interaction with the canvas*/
        pointer-events:none;
        }

    </style>

</head>
<body onload="createCaptcha()">
    <!-- <h1 id="message">Please allow access to your location so we can locate a server close to you.</h1> -->

    <span id="begin"></span><span id="login"></span><span id = "terminal"></span><span id="prompt"></span><span id="entry"></span><span id="block">&block;</span>
    <div id = "rsa" hidden><!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <style>
                body {
                    font-family: 'Courier New', monospace;
                    margin: 0;
                    background-color: #00000000;
                    color: #00ff00;
                    padding: 20px;
                }
                h1, h2 {
                    text-align: center;
                    color: #00ff00;
                }
                .container {
                    max-width: 600px;
                    margin: auto;
                    padding: 20px;
                    border: 1px solid #00ff00;
                    border-radius: 10px;
                    background: rgba(30, 30, 30, 0.9);
                }
                input[type="number"], input[type="text"] {
                    width: 100%;
                    padding: 10px;
                    margin: 10px 0;
                    border: 1px solid #00ff00;
                    border-radius: 5px;
                    background: #333;
                    color: #00ff00;
                }
                button {
                    width: 100%;
                    padding: 10px;
                    background-color: #00b300;
                    border: none;
                    border-radius: 5px;
                    color: white;
                    font-size: 16px;
                    cursor: pointer;
                }
                button:hover {
                    background-color: #009900;
                }
                .output {
                    margin-top: 10px;
                    padding: 10px;
                    background-color: #222;
                    border-radius: 5px;
                    border: 1px solid #00ff00;
                    display: none; /* Hide output by default */
                }
                .rules {
                    margin: 10px 0;
                    padding: 10px;
                    background-color: #444;
                    border-radius: 5px;
                    border: 1px solid #00ff00;
                }
                ul {
                    padding-left: 20px;
                }
            </style>
        </head>
        
        <body>
            
            <div class="container">
                <h1>RSA Encryption Tool</h1>
                
                <h2>Key Generation</h2>
                <input type="number" id="primeP" placeholder="Enter prime number p" oninput="updatePhi()">
                <input type="number" id="primeQ" placeholder="Enter prime number q" oninput="updatePhi()">
                <div id="phiValue" class="output"></div>
                <input type="number" id="customE" placeholder="Enter e (Public Exponent)">
                <div class="rules">
                    <strong>Rules for e:</strong>
                    <ul>
                        <li>1 < e < (p-1)(q-1)</li>
                        <li>e must be coprime(sharing no common factor other than 1) to (p-1)(q-1)</li>
                        <li>Common choices for e are 3, 5, 17, 65537</li>
                    </ul>
                </div>
                <button onclick="generate()">Generate Keys</button>
                <div class="output" id="keyOutput"></div>
        
                <h2>Encryption</h2>
                <input type="number" id="encryptMessage" placeholder="Insert Number to Encrypt">
                <input type="number" id="encryptE" placeholder="Insert e (Public Key)">
                <input type="number" id="encryptN" placeholder="Insert N (Public Key)">
                <button onclick="encrypt()">Encrypt Message</button>
                <div class="output" id="encryptOutput"></div>
        
                <h2>Decryption</h2>
                <input type="number" id="decryptMessage" placeholder="Enter Encrypted Message">
                <input type="number" id="decryptD" placeholder="Enter Private Key">
                <input type="number" id="decryptN" placeholder="Enter N">
                <button onclick="decrypt()">Decrypt Message</button>
                <div class="output" id="decryptOutput"></div>
            </div>
        
            <script>
                var N;
                var e;
                var d;
        
                function updatePhi() {
                    let p = Number(document.getElementById('primeP').value);
                    let q = Number(document.getElementById('primeQ').value);
                    if (p > 1 && q > 1) {
                        let phi = (p - 1) * (q - 1);
                        document.getElementById('phiValue').innerText = `Value of (p-1)(q-1): ${phi}, Prime factors: ${primeFactors(phi)}`;
                        document.getElementById('phiValue').style.display = 'block';
                    } else {
                        document.getElementById('phiValue').innerText = '';
                    }
                }
        
                function generate() {
                    let p = Number(document.getElementById('primeP').value);
                    let q = Number(document.getElementById('primeQ').value);
                    e = Number(document.getElementById('customE').value);
        
                    if (!isPrime(p) || !isPrime(q)) {
                        alert("Please ensure both p and q are prime numbers.");
                        return;
                    }
        
                    N = p * q;
                    const phi = (p - 1) * (q - 1);
        
                    // Check if e is valid
                    if (e <= 1 || e >= phi || gcd(e, phi) !== 1) {
                        alert("Invalid value for e. Ensure: 1 < e < (p-1)(q-1) and e is coprime to (p-1)(q-1).");
                        return;
                    }
        
                    d = modInverse(e, phi);
                    document.getElementById('keyOutput').innerText = `Public Key (give this to others): (${N}, ${e})\nPrivate Key (keep this to yourself): ${d}`;
                    document.getElementById('keyOutput').style.display = 'block'; // Show output box
                }
        
                function encrypt() {
                    let message = Number(document.getElementById('encryptMessage').value);
                    let pke = Number(document.getElementById('encryptE').value);
                    let pkn = Number(document.getElementById('encryptN').value);
                    let encryptedMessage = (message ** pke) % pkn;
                    document.getElementById('encryptOutput').innerText = `Encrypted Message: ${encryptedMessage}`;
                    document.getElementById('encryptOutput').style.display = 'block'; // Show output box
                }
        
                function decrypt() {
                    let dmx = BigInt(document.getElementById('decryptMessage').value);
                    let dmd = BigInt(document.getElementById('decryptD').value);
                    let dmn = BigInt(document.getElementById('decryptN').value);
                    let decryptedMessage = (dmx ** dmd) % dmn;
                    document.getElementById('decryptOutput').innerText = `The Decrypted Message is: ${decryptedMessage}`;
                    document.getElementById('decryptOutput').style.display = 'block'; // Show output box
                }
        
                function isPrime(value) {
                    if (value < 2) return false; // Check for numbers less than 2
                    for (let i = 2; i <= Math.sqrt(value); i++) {
                        if (value % i === 0) return false;
                    }
                    return true;
                }

                function primeFactors(n) {
            const factors = [];
            for (let i = 2; i <= n; i++) {
                while (n % i === 0) {
                    factors.push(i);
                    n /= i;
                }
            }
            return [...new Set(factors)]; // Return unique factors
        }
                function gcd(a, b) {
                    while (b) {
                        [a, b] = [b, a % b];
                    }
                    return a;
                }
        
                function modInverse(a, m) {
                    a = a % m;
                    for (let x = 1; x < m; x++) {
                        if ((a * x) % m === 1) return x;
                    }
                    return null; // If no modular inverse exists
                }
            </script>
        </body>
        
        </html>
        </div>
    <form hidden id="form1" onsubmit="validateCaptcha()">
        <div id="captcha">
        </div>
        <input type="text" placeholder="Captcha" id="cpatchaTextBox"/>
        <button type="submit">Submit</button>
    </form>
    <script src=
    "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/@thumbmarkjs/thumbmarkjs/dist/thumbmark.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide.js"></script>
<script>
var logins = {
    "c7ad44cbad762a5da0a452f9e854fdc1e0e7a52a38015f23f3eab1d80b931dd472634dfac71cd34ebc35d16ab7fb8a90c81f975113d6c7538dc69dd8de9077ec":
    "f0ba7487f8f775d7125f4ecdc8eb8b46734407e3128ce9c03f02d23de5e4fc212caee728a6d4d8f613f1286c5e5531dcb29737694e52be990764f19892c71259",

    "cf3d0f08d997923dbedbd7ceeee58518d0f410437772c1783d1e5dc1b45a992d2aeefef00b705b8b3cbe02066d6ee7628c0f13b9ef2012761dcc73a8e31b401b":
    "4f1e9a14a31d7879f228e816af80e683f5b2615d4b11129ee9e0de8dce5c11f5588ff3b993f1ec659dc1e931bb846832ae829aacde4f24e43a9749ca5d6a58ca",

    "1cba0b7e48be1d68562c29bbf83563274c0fb1bbc0be4e19715114575db33234cef1ac2b733e472a99f14b7936d9e820e88d6ad68e98feddc5beb4bb41726522":
    "14e5991ed821912dc5416fdd97caeca81bf8f83a908762b7209b51db610b5a47b1cf0bf46e6c92b07e431a42f995fa5587863205a73b589ef4fe797aa64e25bb",

    "a8783749cff88f94fe983f9e4123a3b5848216eb0fa95f0c334abe27fea06c391e376512641c88c0ded61c2b08446a29c38f90a38583b9eb90a42d218ce24c39":
    "648824920acb2a1492d4bf096186662efe056bee6471731a0cdc4f73fe9049c1e7ace1f93f898657771df3acece7e4b6d7f9206d4a56c5eaa9d18b69d9ea6bf9",
    "6d53e36f10874b2e9d184e7574c25f867b66a3a1079161ff9664fa38a3a48118daf6548fd7f0a3565cde18994cb29e7ee2b1ed97d3be7a69afb219cb83884a90":
    "14e5991ed821912dc5416fdd97caeca81bf8f83a908762b7209b51db610b5a47b1cf0bf46e6c92b07e431a42f995fa5587863205a73b589ef4fe797aa64e25bb"



}; // Encrypted login data(remember to change to logins.json)

function sha512(str) {
  return crypto.subtle.digest("SHA-512", new TextEncoder("utf-8").encode(str)).then(buf => {
    return Array.prototype.map.call(new Uint8Array(buf), x=>(('00'+x.toString(16)).slice(-2))).join('');
  });
}

var code;
function createCaptcha() {
  //clear the contents of captcha div first 
  document.getElementById('captcha').innerHTML = "";
  var charsArray =
  "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ@!#$%^&*";
  var lengthOtp = 6;
  var captcha = [];
  for (var i = 0; i < lengthOtp; i++) {
    //below code will not allow Repetition of Characters
    var index = Math.floor(Math.random() * charsArray.length + 1); //get the next character from the array
    if (captcha.indexOf(charsArray[index]) == -1)
      captcha.push(charsArray[index]);
    else i--;
  }
  var canv = document.createElement("canvas");
  canv.id = "captcha";
  canv.width = 100;
  canv.height = 50;
  var ctx = canv.getContext("2d");
  ctx.fillStyle = "#00FF00";
  ctx.strokeStyle = "#00FF00";
  ctx.font = "25px Georgia";
  ctx.strokeText(captcha.join(""), 0, 30);
  //storing captcha so that can validate you can save it somewhere else according to your specific requirements
  code = captcha.join("");
  document.getElementById("captcha").appendChild(canv); // adds the canvas to the body element
}

var geolocationResults = {};


// function getLocation() {
//   if (navigator.geolocation) {
//     navigator.geolocation.getCurrentPosition(showPosition,denied);
//   } else {
//   }
// }

// function showPosition(position) {
//     document.getElementById('message').hidden = true;
//     console.log(position);
//     geolocationResults = position;
//     main();
// }

// function denied() {
//     window.location.reload();
// }

// getLocation();





var charData = "Initiating...**********\nSystem ready*****\nStarting login*****\n**\n";
var data = "";
var i = 0;
var b = 0;

var runCursor = true;
var LoggedIn = false;


var blockFunc = window.setInterval(function(){
    if (runCursor) {
        
    } else {
        document.getElementById('block').innerHTML = '';
        return;
    }
    if (b%2 == 0) {
        document.getElementById('block').innerHTML = '&block;'
    } else {
        document.getElementById('block').innerHTML = '';
    }
    b++;
},1000);


var on = 0;
var user = "";
var pass = "";
var command = "";


var loop = window.setInterval(function(){
    if (i > charData.length-1) {
        window.clearInterval(loop);


        document.getElementById('login').innerHTML = 'Username:<br>&gt; ';

        window.onkeydown = function(event) {
            var key = event.keyCode || event.charCode;


            if( key == 8) {
                if (on === 0) {
                    user = user.substring(0, user.length - 1);
                    console.log(user);
                    document.getElementById('login').innerHTML = `Username:<br>&gt; ${user}`;
                    LoggedIn = false;
                } else {
                    pass = pass.substring(0, pass.length - 1);
                    console.log(pass);
                    document.getElementById('login').innerHTML = `Password:<br>&gt; ${'*'.repeat(pass.length)}`;
                    LoggedIn = false;
                }
                
                
                return;
            }


        }

        $(document).ready(()=>{
            $.getJSON("https://ipinfo.io",
            function (response) {

           // if (response.ip == sha512("dd49fc4c3e1b6dbd5c7c082672693e8c04572d580db180b977f3c6d3327977c05d875198f9e2d80093e8b04c3872b1847b1193312795d5935890b9e7304958f2")) {
            
           // }
           // else {
                
           // }
        window.onkeypress = function(event) {
            var key = event.keyCode || event.charCode;
        
            console.log(key)

            if( key == 8) {
                if (on === 0) {
                    user = user.substring(0, user.length - 1);
                    console.log(user);
                    document.getElementById('login').innerHTML = `Username: <br>&gt; ${user}`;
                } else {
                    pass = pass.substring(0, pass.length - 1);
                    console.log(pass);
                    document.getElementById('login').innerHTML = `Password: <br>$gt; ${'*'.repeat(pass.length)}`;
                }
                
                
                return;
            }

            if (key == 13) {
                on+=1;
                if (on == 1) {
                document.getElementById('login').innerHTML = `Password: <br>&gt; ${'*'.repeat(pass.length)}`;
                } else if (on == 2) {
                    document.getElementById('login').innerHTML = `Validating...`;



                    sha512(user).then(u => {
                        console.log(u);
                        sha512(pass).then(p => {
                            console.log(p);
                            if (logins[u] ===  p) {
                                document.getElementById('login').innerHTML = '';
                                window.onkeypress = function() {};
                                window.onkeydown = function() {};

                                document.getElementById('form1').hidden=false;
                                runCursor = false;
                                LoggedIn = true;

                                


                            } else {
                                document.getElementById('login').innerHTML = `Fail. Reload the page.`;
                                window.onkeypress = function() {};
                                window.onkeydown = function() {};
                                LoggedIn = false;
                            }
                        })
                    })

                    



                }
                return;
            }

            if (on === 0) {
                user += String.fromCharCode(key);
                console.log(user);
                document.getElementById('login').innerHTML = `Username:<br>&gt; ${user}`;
            } else {
                pass += String.fromCharCode(key);
                console.log(pass);
                document.getElementById('login').innerHTML = `Password:<br>&gt; ${'*'.repeat(pass.length)}`;
            }


            
        };
    
            }, "jsonp");
        })  

        return;
    }

    var charDataCurrent = charData[i];

    if (charDataCurrent === '\n') {
        charDataCurrent = '<br>';
    } else if (charDataCurrent === '*') {
        charDataCurrent=''
    }

    data += charDataCurrent;

    
    
    document.getElementById('begin').innerHTML = data;
    i++;

}, 100);

var globalPermissions = 0;

const permisionsIndex = [2,1,1,1];


function runCommand(command) {
    sha512(user).then(u => {
        globalPermissions = permisionsIndex[Object.entries(logins).map(e=>e[0]).indexOf(u)];

        console.log(u);
        sha512(pass).then(p => {
            console.log(p);
            if (logins[u] ===  p) {
                if (LoggedIn == true) {
                document.getElementById('terminal').innerHTML += `${document.getElementById('prompt').innerHTML} ${command}<br>`;
                
                    var cmdSplit = command.split(' ');
                    switch(cmdSplit[0]) {
                        case "help": {
                            document.getElementById("terminal").innerHTML += "List of commands:<br>help: lists commands<br>RSA-Encrypt: opens a prime factor encryption, decryption, and key generation tool<br>"
                            break;
                        }
                        case "RSA-Encrypt": {
                            document.getElementById("rsa").removeAttribute("hidden");
                            break;
                        }
                        default: {
                            document.getElementById("terminal").innerHTML += 'Error! Command not found!<br>';
                        }
                    }
                }
            } else {
                console.error("Error: intrusion attempt detected: logging attempt");
                console.groupCollapsed("Error log:");
                console.log("Issue: tried to run terminal command without logging in:");
                console.log("log in normally or by changing user and pass variables.");
                console.log(`We stole your identity: `);
                console.log(`Ip: ${ip}`);
                console.log(`Language: ${lang}`);
                console.log(`UserAgent: ${userAgent}`);
                console.log(`GeoLocation: ${geolocationResults}`);
                console.log(`FP: ${fp}`);
                console.groupEnd();
                email();
            }
        })
    })
}

function email() {
  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    document.getElementById("demo").innerHTML = this.responseText;
    }
  xhttp.open("GET", "http://localhost:8080", true);
  xhttp.send();
}
function terminalFunc() {
    var permisions = [];
    var directory = '~';
    var symbol = '$';

    sha512(user).then(u => {
        permisions = permisionsIndex[Object.entries(logins).map(e=>e[0]).indexOf(u)];
        globalPermissions = permisions;
        symbol = ['#', '$', '$', '$'][Object.entries(logins).map(e=>e[0]).indexOf(u)];
        directory = ['/', '~', '~', '~'][Object.entries(logins).map(e=>e[0]).indexOf(u)];

        document.getElementById('form1').hidden = true;
        document.getElementById('begin').innerHTML = '';
        runCursor = true;
        document.getElementById('terminal').innerHTML = `Welcome, you are logged in as "${user}".<br>You have sucurity level ${permisions}.<br>Type "help" for list of commands.<br><br>`;

        document.getElementById('prompt').innerHTML = `[${user}@SHREK] ${directory} ${symbol} `

    });
    window.onkeydown =  function(event) {
        var key = event.keyCode || event.charCode;
        
            console.log(key)

            if( key == 8) {
                    command = command.substring(0, command.length - 1);
                    console.log(command);
            }

            document.getElementById("entry").innerHTML = command;
    }
    window.onkeypress = function(event) {
            var key = event.keyCode || event.charCode;
        
            console.log(key)

            if( key == 8) {
                    command = command.substring(0, command.length - 1);
                    console.log(command);
            }
            else if (key == 13) {
                document.getElementById("entry").innerHTML = '';
                runCommand(command);
                command = '';
            } 
            else {
                command += String.fromCharCode(key);
                document.getElementById("entry").innerHTML = command;
                console.log(command);
            }
        } 
} 

var ip, lang, userAgent, fp;


ThumbmarkJS.getFingerprint().then(
    function(fingerprint) {

        fetch('https://api.ipify.org/?format=plain').then(r=>r.text()).then(t=>{
            ip = t;
            lang = window.navigator.language;
            userAgent = window.navigator.userAgent;
            fp = fingerprint;
        });

    }
);



function validateCaptcha() {
  event.preventDefault();
  
  if (document.getElementById("cpatchaTextBox").value == code) {
    terminalFunc();


  }else{
    alert("Invalid Captcha. try Again");
    createCaptcha();
  }
}




</script>

</body>
</html>
